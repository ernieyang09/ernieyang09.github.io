webpackJsonp([44611889172531],{"./node_modules/json-loader/index.js!./.cache/json/1.json":function(n,s){n.exports={data:{allMarkdownRemark:{edges:[{node:{fields:{slug:"/posts/faster-component/"},frontmatter:{title:"Faster Functional Component",date:"2018-01-12T10:32",tags:["react"],release:!0},html:'<snippet>\nOMG，好久沒更新了網誌了，其實有很多該記錄的都忘了...趕快來補一點文章。\n</snippet>\n<p>今天在整理書籤裡面的網頁，點出了<a href="https://medium.com/missive-app/45-faster-react-functional-components-now-3509a668e69f">這篇</a>。</p>\n<p>其實我不知道大部份人的寫作風格是不是stateless component，因為有一些人蠻強調這點，全部state寫進redux，還可以輔以recompose之，但我是沒看過這種專案。</p>\n<p>stateless component乾淨但是沒有實作performance優化。我自己習慣就算只寫render還是寫class。</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">const</span> Component <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>div<span class="token operator">></span>This is a Stateless Component<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">,</span>\n  mountNode\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>所以作者提出了直接用function，functional component!!</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">const</span> Component <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>div<span class="token operator">></span>This is a Stateless Component<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>\n  <span class="token punctuation">{</span><span class="token function">Component</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">}</span>\n  <span class="token punctuation">,</span>\n  mountNode\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>原文說效能提升，我就不特別驗証了。</p>\n<p>如果未來的某天，stateless component實作優化了，還請留言通知我啊(等好久啦)。</p>'}},{node:{fields:{slug:"/posts/undefined/"},frontmatter:{title:"React開發決策",date:"2017-10-17T23:34",tags:["react"],release:!0},html:'<p><snippet>來自: <a href="https://medium.freecodecamp.org/8-key-react-component-decisions-cc965db11594">8 Key React Component Decisions</a></p>\n<p>順便整理一下目前開發的心得\n</snippet></p>\n<p>整篇文章蠻簡單的，不照翻，文章內有投票可以知道世界各地大家是怎麼開發react的。\n(統計結果一直在變動，因為是即時的)</p>\n<h4>Decision 1: Dev Environment</h4>\n<p>主要講的是你的boilerplate從哪來，我個人prefer custom webpack，原因很簡單，用包裝好的常常不容易customize，公司有使用nwb做為開發，但我踩了很多雷，create-react-app預設了計多套件，也不一定每一個都是match的，custom也能讓自己更容易多了解各套件要如何設定，雖然繁瑣，但是增加練習機會。我使用atom，也不喜歡vscode的auto eslint，有人強調我們是來寫code的，而不該花時間在這上面。我覺得很多東西需要自動化(ci)，但這些應該是工程師要會的。</p>\n<p>統計結果: 65% create-react-app，不知道業界是不是都這樣@ _ @</p>\n<h4>Decision 2: Types</h4>\n<p>check type的選擇，我不是微軟派的，不會typescript!!正用proptypes，但想練習flow，久聞flow，不過沒有survey與proptypes的比較。</p>\n<p>統計結果: 42% proptypes，預設樂勝，不過沒想到typescript也很高。</p>\n<h4>Decision 3: createClass vs ES Class</h4>\n<p>不說了，ES class，結案。</p>\n<h4>Decision 4: Class vs Functional</h4>\n<p>stateful vs stateless，我有點忘記了，以前吃過蠻多stateless component的雷，而且實際上react沒有優化stateless，所以我就算只有render function也會寫class。stateless是真的讓code蠻乾淨的，如果真的要寫stateless可以搭配recompose使用，也更像functional programing，也計之後有機會再試試吧。</p>\n<h4>Decision 5: State</h4>\n<p>控管state的方法，啥是show answers XDD，目前就是用redux囉，業界應該也最常用。</p>\n<p>統計結果: 48% redux</p>\n<h4>Decision 6: Binding</h4>\n<p>Class prop arrow function for the win!!雖然javascript的dynamic Binding是特色之一，但我是覺得寫成class(尤其是react)，給class以外使用是很怪的，寫class arrow function最方便了XD，作者又提了一次別在render裡面使用arrow function與bind(重要)。</p>\n<p>統計結果: 36% Class prop arrow function</p>\n<h4>Decision 7: Styling</h4>\n<p>個人認為最頭痛的比較...我就是SASS派的，真心覺得css module Z > B，oocss、smacss、bem真的很夠用，不過我自認css沒這麼強，沒辨法給太多好的建議。以趨勢而言，2016 -> 2017 確實css module比例下降了，但我跟作者一樣，也在觀望styled-components，又是一個坑啦。</p>\n<p>統計結果: 58% plain CSS</p>\n<h4>Decision 8: Reusable Logic</h4>\n<p>hoc最有名，但render props正夯，之前有寫一兩篇文章介紹。我認為應該render props會強點，之後會更多人使用。</p>\n<p>統計結果: 45% \bhoc</p>\n<p>感謝作者的歸納與統計，拿來做自我的檢視剛剛好，建議對react不熟的人也可以多多去思考上面這些issue，對整個react會有更不一樣的認知。</p>'}},{node:{fields:{slug:"/posts/render-props/"},frontmatter:{title:"render prop正夯",date:"2017-10-07T22:54",tags:["react"],release:!0},html:'<snippet>\n前陣了寫了跟HOC有關的文章，我從來沒用過mixin，雖然介紹了HOC，但自己使用的時候總覺得哪裡怪怪的，看了最近蠻紅的影片，終於恍然大悟，讓我們來介紹render props吧。\n</snippet>\n<p>一切要從Michael Jackson的<a href="https://www.youtube.com/watch?v=BcVAq3YFiuc">影片</a>開始，或是你也可以看他寫的<a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce">文章</a>。(他是react-router的創始人之一)</p>\n<h3>mixin</h3>\n<p>本來mixin的出現是為了code的reusable，這邊不特別介紹mixin的寫法，在我開始寫的時候，就已經不流行了。</p>\n<h4>mixin的問題</h4>\n<ol>\n<li>\n<p>不支持es6 class<br/>\n沒錯，就是這點，所以我沒寫過，我也以前也只知道這點XDD。</p>\n</li>\n<li>\n<p>無方向性<br/>\n我是看文章翻譯的，簡言之，mixin使用了state，這樣會使被附加的component不知道state從哪裡來，尤其是一個component內用了不只一個mixin，code會變的implict。</p>\n</li>\n<li>\n<p>命名衝突<br/>\n如果有兩個mixin操作了相同名稱的state，這時候就會發生命名衝突，而且程式會直接掛掉，無法跑。</p>\n</li>\n</ol>\n<h3>HOC</h3>\n<p>採用了decorator的方式，跟\bmixin相比支援es6 class。想了解的可以去翻我之前寫的文章。</p>\n<h4>HOC的問題</h4>\n<ol>\n<li>\n<p>一樣無方向性。</p>\n</li>\n<li>\n<p>一樣命名衝突，但是可以跑，後面的會覆蓋前面的，react不會警告。比起mixin，這樣應該算更不好的缺點。</p>\n</li>\n</ol>\n<h3>render prop</h3>\n<p>在render裡面做處理，跟前兩種很不一樣的點，前面兩種被視為static composition，你只會做一次composition，在你create class的時候，而render prop為dynamic composition，每一次render的時候都會。我對這些是沒辨法自己想到見解，但我覺得這是蠻有道理的。</p>\n<p>雖然我寫render prop，但其實常見的是Function as children?不過原理是一模一樣的，請安心使用。</p>\n<p>試寫Function as children</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">chilren</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>A<span class="token operator">></span>\n      <span class="token punctuation">{</span> AState <span class="token operator">=></span> <span class="token punctuation">(</span>\n          <span class="token operator">...</span>\n        <span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>A<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>無方向性解決，你可以很簡單的從function的params得知是哪來的。</p>\n<p>命名衝突解決，\bfunction的params就像module or block一樣。隸屬於不同的params，永遠不會衝突。</p>\n<p>唯一的問題(我想的)，因為變成兩個class，多了一個&#x3C;div>Root，我個人很討厭react的一堆div(炸)。</p>\n<p>打完啦，我是看影片學的，影片裡面有更多有趣的說法，像是問題就像nail，而mixin就是hammer，然後敲敲敲，react-router其實不想寫HOC，但是因為社群需要\b...建議聽的懂英文而有時間的可以看看影片，很精采。</p>\n<p>我個人是覺得應該還是各有優缺點(雖然原文是render prop必勝)，HOC有recompose這個套件，render prop有react-powerplugin這個套件，目前在寫的時候目標是往render prop走，再看看會遇到什麼坑囉。</p>'}},{node:{fields:{slug:"/posts/aws_s3_plugin/"},frontmatter:{title:"Webpack S3 plugin",date:"2017-09-30T21:57",tags:["webpack"],release:!0},html:'<p>承前幾天寫的文章，我也忘記為什麼突然search到這個plugin，看了一下可以自動化上傳，於是就跳下去了...</p>\n<p>試了一陣子，了解了之後其實很簡單</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code>$ npm i webpack<span class="token operator">-</span>s3<span class="token operator">-</span>plugin\n</code></pre>\n      </div>\n<p>webpack設定</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">===</span> <span class="token string">\'production\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  config<span class="token punctuation">.</span>webpack<span class="token punctuation">.</span>extra<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>\n    <span class="token keyword">new</span> <span class="token class-name">S3Plugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment" spellcheck="true">// s3Options are required</span>\n      s3Options<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n        accessKeyId<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>AWS_ACCESS_KEY<span class="token punctuation">,</span>\n        secretAccessKey<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>AWS_SECRET_ACCESS_KEY<span class="token punctuation">,</span>\n        region<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>AWS_REGION<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      s3UploadOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n        Bucket<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>AWS_BUCKET<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      cloudfrontInvalidateOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n        <span class="token comment" spellcheck="true">// Automatically invalidate your Cloudfront distribution cache every time you upload your code</span>\n        DistributionId<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>CLOUDFRONT_DISTRIBUTION_ID<span class="token punctuation">,</span>\n        Items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/*"</span><span class="token punctuation">]</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Bucket就是你S3的bucket，region請<a href="http://docs.aws.amazon.com/general/latest/gr/rande.html">參照此</a></p>\n<p>先講cloudfront部份，cloudfront有cache機制，預設是86400秒(一天)，如果要提前就要讓其失效(Invalidation)。關於失效的可以參考<a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Invalidation.html#InvalidationLimits">這裡</a>，看起來是算更新次數而不是更新檔案，1000次非常夠用。</p>\n<p>再來就是accessId跟Key，一開始找不到在哪，問了同事要從IAM設一個新user，然後將AmazonS3FullAccess與CloudFrontFullAccess加上，不想用Invalidation不需要後面的權限，這樣就完成囉!!</p>\n<p>其實我相信真的有在大量使用AWS的公司，應該都會有DevOps做自動化流程，這套件也是將s3 cli包進來做指令。因為之前是微軟體系的，然後後來對前端比較有興趣，這次稍微碰了一下，AWS很強大，在很多服務中很容易不知道該做什麼，真的S難QAQ</p>'}},{node:{fields:{slug:"/posts/aws-s3-cdn-53/"},frontmatter:{title:"AWS簡略記",date:"2017-09-28T21:49",tags:["AWS"],release:!0},html:'<p><snippet>在公司做的頁面要上啦，說明要用AWS，跳坑研究一下(嗚嗚 需要devOps)，總共用了S3、CloudFront、Route53</snippet></p>\n<h3>S3 (Simple Storage Service)</h3>\n<p>雲端儲存，create一個bucket放置檔案，操作蠻簡單的。</p>\n<p>因為是要用來架站用，所有東西都要能被外界使用，所以要設立權限。這邊的權限是bucket裡面的object，而非bucket本身。\n\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 72.6161369193154%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAB50lEQVQ4y62USU/bUBDH/Sm5gVBFeyugHiLU7cAiSlWJAIeeUCU+QA+tULkgAS00KrQJ0CK2xGv84iXBu+MQ+9/3bIrYAhR40l9vmfHPM/PG5pS6B8l04fg+olbrnIJmE14QwA/DW4srlLax+nMTa7+2sHqirxslHIoyLMeF62fAsqRgZb2Ib8y3uIXdioAwii4DB9++R3/+AwbGp/F0dAr9k7N4MjaD+eUCVFIDUVWEgY8vKwX0DVP7zBye5Wcx93E+zcLxvHPionaCqB2DzUmS4PO+jel1A/kfOia+ayjWArCR+WR+x3GCToNT7QiKxdSEH7XxrqAjt6jixRJBzycRC2UHTngMoRGm0twWWu1rgEQzQXQTmlFHtabDqB8hoLWI4xh3GZzjerAdD5ZNb5qumdianWW27JzV61bAR8/HIasEVSqiaRBlGbwg0IgNesP+jW1ysa243qExEMMEL4oo8zwFKvR2SQq0XfdG2CVgT240BbK6VYkKQZKxd3CA3392cFipwGw04Hdo7iuBj19NZED6VQiShGJpEzwvQKKR1nQdHk27SevHxMBHtn0a+ZXAvpdvoBAtdWKNyeZOtWMPM5t7Avq3987sue7cCHgaDXtzw7LuLa5r8HWa8v/8AK6t4UMD/wJEbmEEKFKajgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="s3-1"\n        title=""\n        src="/static/970dab34abfe188cfe51567b5c6f38be-a408b.png"\n        srcset="/static/970dab34abfe188cfe51567b5c6f38be-4eabf.png 148w,\n/static/970dab34abfe188cfe51567b5c6f38be-5a375.png 295w,\n/static/970dab34abfe188cfe51567b5c6f38be-a408b.png 590w,\n/static/970dab34abfe188cfe51567b5c6f38be-24515.png 818w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  </p>\n<p>可以使用AWS的policy generator即可。\n\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 88.58195211786372%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8ElEQVQ4y5VUXY/aMBDMv25/RV/bh74cFflwHDsJf6CtrlKPqOiokHovqGppQkKQjgJCQgKmu84FHZejFyKNZrWOx7u2x5bv++h2u3BsB7ZtQwgfWuuzUDpCoELDSoeNcUtJASk8CMeBcF0Ij2Ih4Utl4IkAkljKAMLnnEYUxQ+IGrC4QsdxSdRFQOKB70EFAYJHUEodIYOQKtQVBxVXuYqtXq8HhpRUFYkLIYwIM+d41fqfNrBiRZOUj8h3CDYi6SCOwotETgTDMDy2xcxV1XHF6tgSt1i3zuN8CA3Bk0Qc49P1Da6TEb5+G+H7j5+4G6et8fHzl1NBXnU8HiPLMhR5gel0auI0TfFnMjFxWZY4HA7PIkmSJxUSWGS5XGKxWGA+nxP/xX6/x0sfC/b7fToUapNPtAYLrlYr3N8vDDO22217wacVFkVhBLI0MxXudju0+V4U5L1ar9cNQZ54kWCe52bPzm38OfAcIxiG7FOPTpidIYzgpWI1bm8HsLT24TodaOWSzQQmv39hNpsZcNvlvKS4NHE2zTErq7ikHO9x/R/fisGAro2xHSE0tnON4GazeRZ3yXuU2ejs+HA4rKxXW6m2m+e58NwP9EZ2IOnBeGzF/9muab0HuJ03uHr7Gp13r+A5V/QmavB9bfM4/AOTf8QyVpJ4BQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="s3-2"\n        title=""\n        src="/static/822f2cc9c4f0bb8735dd56ff463f9b90-a408b.png"\n        srcset="/static/822f2cc9c4f0bb8735dd56ff463f9b90-4eabf.png 148w,\n/static/822f2cc9c4f0bb8735dd56ff463f9b90-5a375.png 295w,\n/static/822f2cc9c4f0bb8735dd56ff463f9b90-a408b.png 590w,\n/static/822f2cc9c4f0bb8735dd56ff463f9b90-9a0cc.png 885w,\n/static/822f2cc9c4f0bb8735dd56ff463f9b90-c03c5.png 1086w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  </p>\n<p>但要特別注意一點，在產生的Resource後面要加上/*，不然會發生<a href="https://stackoverflow.com/questions/44228422/s3-bucket-action-doesnt-apply-to-any-resources">Action does not apply to any resource(s) in statement\b</a>。</p>\n<p>如果只是要架一個簡單的網站，到這邊配上Static website hosting就很夠了，使用c\bdn的話這邊不需要hosting。</p>\n<h3>CloudFront</h3>\n<p>AWS提供的cdn服務</p>\n<p>選擇web服務，Origin Domain Name選擇剛剛建立的S3 bucket，小設定不提，因為我要用cdn架站，再用Route53指過來，\nDefault Root Object要寫entry，每個人應該都是index.html。Compress Objects Automatically可以加速，記得打開。另外一個重要的點，\n跑SPA網站，網站的route是由前端控制，\bhosting可以由Error Pages設定。\n\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 45.16880093131548%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVQoz5WS62qEMBCFff/n84eIl4Bso4n3ouL1NGfAslu07Q4cx8TJ55khnu/7SJIEQRBIDsMQcRyD+9yr6xrvhKeUQpZlDhJBpQqJg6VpiiiKkOc59n1/S97zomka9H2PcRwxTZPkeZ6xLMu3tm2TWtZdAmmTLywchkHEYlMYfDweKIoCXdeJ2D6hDK4vW+aDzqqqksOcm9Za9q4cHMchB/nTW+Cn+0iYNVZy27YIVP7r8MuyvAcyCCHMmAK1c6d1Lq7XdX0RXf4LeLZsjEHj4GzbWiutneIYzhn+CfwZd9finOFdfAF3ELtJH2HdHAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="cloudfront-1"\n        title=""\n        src="/static/c9d09870ac47be483a77c3a01239bd97-a408b.png"\n        srcset="/static/c9d09870ac47be483a77c3a01239bd97-4eabf.png 148w,\n/static/c9d09870ac47be483a77c3a01239bd97-5a375.png 295w,\n/static/c9d09870ac47be483a77c3a01239bd97-a408b.png 590w,\n/static/c9d09870ac47be483a77c3a01239bd97-9a0cc.png 885w,\n/static/c9d09870ac47be483a77c3a01239bd97-aa987.png 1180w,\n/static/c9d09870ac47be483a77c3a01239bd97-ecaf3.png 1718w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n如此一來，如果有人直接打上路由，會被導到index並且正常的轉到該顯示的頁面。</p>\n<h3>Route53</h3>\n<p>AWS提供的dns控管服務</p>\n<p>如果CloudFront要串到這裡，Alternate Domain Names (CNAMEs)要先打上Route53即將要給的domain，這邊好像沒什麼特別要注意的。CloudFront那邊可以設定ipv6，\bipv4就選A然後選alias貼上CloudFront的網址(\bxxxxx.cloudfront.net)，有ipv6就AAAA也設定一下。不確定是不是CloudFront要Delpoyed才能生效(\bCloudFront每次進入in progess都要1x-2x分鐘)</p>\n<p>PS.</p>\n<p>還有遇到ssl問題啦(如果CloudFront走https又改domain)，結果custom ssl一直反白，Certificate只能用\b<a href="https://stackoverflow.com/questions/28609262/unable-to-select-custom-ssl-certificate-stored-in-aws-iam">美東</a>的啦</p>\n<p>呼，總算弄完了!!</p>'}},{node:{fields:{slug:"/posts/map_eventhandler/"},frontmatter:{title:"React with map中的eventhandler",date:"2017-09-27T22:49",tags:["react","javascript"],release:!0},html:'<p>這個問題好像不常遇到，但是今天被同事問到的時候還一時回答不出來。</p>\n<p>問題淺顯易懂，在map function裡面的params要何如何傳出來parent。</p>\n<p>一下就回答用callback啊，但是仔細想一想要怎麼傳哬，囧。</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>\n  handleClick <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment" spellcheck="true">// what to do</span>\n    <span class="token operator">...</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token punctuation">{</span>\n          <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span> child <span class="token operator">=></span> <span class="token punctuation">(</span>\n            <span class="token comment" spellcheck="true">// I want child props ex: ID</span>\n            <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n          <span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>先想了一個解決方法後開始google，看到這篇\b<a href="https://stackoverflow.com/questions/29810914/react-js-onclick-cant-pass-value-to-method">文章</a></p>\n<h4>Easy way</h4>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span> child <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre>\n      </div>\n<p>這就是一般人直覺會想到的做法，但並不是太好。這網路上有很多文章，反正會有slightly performance issue(rebind與pure component等問題)，另外不好閱讀。</p>\n<h4>Better Way</h4>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>\n  onChildClick <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token operator">...</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token punctuation">{</span>\n          <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span> child <span class="token operator">=></span> <span class="token punctuation">(</span>\n            <span class="token comment" spellcheck="true">// I want child props ex: ID</span>\n            <span class="token operator">&lt;</span>Child onChildClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChildClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n          <span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>\n  handleClick <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onChildClick</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>這例子看起來很蠢，不過現實中很少map裡面長這麼簡單的，以前都寫這種寫法，所以就不知道怎麼回答寫在同一層的XD。</p>\n<p>不過我一開始認真想的是data-attr</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>\n  handleClick <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> cid <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"data-cid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token punctuation">{</span>\n          <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span> child <span class="token operator">=></span> <span class="token punctuation">(</span>\n            <span class="token comment" spellcheck="true">// I want child props ex: ID</span>\n            <span class="token operator">&lt;</span>div data<span class="token operator">-</span>cid<span class="token operator">=</span><span class="token punctuation">{</span>child<span class="token punctuation">.</span>id<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n          <span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>隱約記得在哪個文章看過(react官方網站?!人老了)</p>\n<p>最後，因為專案都用semantic-react啦\b...可以直接傳出data，用久了難怪忘光XDD，看了一下source code，使用lodash的invoke</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code>handleClick <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> disabled <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token keyword">return</span>\n  <span class="token punctuation">}</span>\n\n  _<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token string">\'onClick\'</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>也算學到了新東西!!</p>'
}}]}},pathContext:{offset:6,paginations:6,total:23}}}});
//# sourceMappingURL=path---1-20a8fc4c278dfd22601c.js.map