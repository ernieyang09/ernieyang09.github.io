{"version":3,"sources":["webpack:///path---posts-circular-dependency-plugin-58f37a4469492f69fdc0.js","webpack:///./.cache/json/posts-circular-dependency-plugin.json"],"names":["webpackJsonp","456","module","exports","data","site","siteMetadata","title","author","markdownRemark","id","html","fields","slug","frontmatter","date","tags","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,MAAA,OAAAC,OAAA,eAAsCC,gBAAmBC,GAAA,kJAAAC,KAAA,i5IAA8mHC,QAAymCC,KAAA,sCAA4CC,aAAgBP,MAAA,6BAAAQ,KAAA,mBAAAC,MAAA,cAAoFC,aAAgBJ,KAAA","file":"path---posts-circular-dependency-plugin-58f37a4469492f69fdc0.js","sourcesContent":["webpackJsonp([47039559723594],{\n\n/***/ 456:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"前端小誌\",\"author\":\"Ernie Yang\"}},\"markdownRemark\":{\"id\":\"/Users/ernieyang09/Desktop/workspace/gatsby-blog/src/pages/posts/2018/01/0115--circular-dependency-plugin.md absPath of file >>> MarkdownRemark\",\"html\":\"<snippet>\\n之前在build的時候遇到的問題，主要就是開發的時候完全沒問題，但是在build的時候會發生error，error的畫面我忘記截圖了。最後的結果是import的順序有重復。\\n</snippet>\\n<p>Circular Dependency最常見的錯誤</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// A.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token constant\\\">B</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./B'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// B.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token constant\\\">C</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./C'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// C.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token constant\\\">A</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./A'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// A -> B -> C -> A</span></code></pre>\\n      </div>\\n<p>常常發現\\bimport之後<a href=\\\"https://stackoverflow.com/questions/35240716/webpack-import-returns-undefined-depending-on-the-order-of-imports\\\">拿到undefined</a></p>\\n<p>專案中我將網頁的router抽出來整理(router.js，裡面有import所有router用的component)，然後對每個頁面包覆Page component。</p>\\n<p>Like this</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">import</span> routers <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./routers'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token operator\\\">...</span>\\n\\n<span class=\\\"token punctuation\\\">{</span>\\n  routers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>router <span class=\\\"token operator\\\">=></span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token operator\\\">&lt;</span>Route\\n      path<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>router<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">}</span>\\n      component<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>router<span class=\\\"token punctuation\\\">.</span>component<span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">SomePage</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n        <span class=\\\"token operator\\\">&lt;</span>Page<span class=\\\"token operator\\\">></span>\\n          <span class=\\\"token operator\\\">...</span>\\n        <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>Page<span class=\\\"token operator\\\">></span>\\n    <span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>其中，Page component裡面寫了一個Breadcrumb，Breadcrumb理所當然跟router有關，所以我就在Breadcrumb import routers，開發時完全沒問題，build的時候就爆炸啦XD</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">index <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span>  routers <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> Page <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> Breadcrumb <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> routers</code></pre>\\n      </div>\\n<p>這種重覆import的例子並不是只要有任何的寫到就會出錯，是一種機率性的，就像有時候build起來的css跑掉了，可能是import了某個module(但不一定有用到css)，造成webpack build的時候順序不一樣了，這種build的時候才會出現問題的最麻煩了。</p>\\n<p>不過了解了這個問題之後，google了一下，有一個webpack plugin - <a href=\\\"https://github.com/aackerman/circular-dependency-plugin\\\">Circular Dependency Plugin</a></p>\\n<p>能在runtime的時候，發現重覆import的問題，直接不能執行，並且show出哪些文件有問題，我個人是覺得蠻好用的。</p>\\n<p>最後我的作法是把index跟Breadcrumb load的router切開來寫成兩個檔案，只是以mainatin上就要保持兩邊一致(加入新的\\broute，兩邊都要設計一遍)，目前還沒想到比較好的做法，不過這要看專案設計囉。</p>\",\"fields\":{\"slug\":\"/posts/circular-dependency-plugin/\"},\"frontmatter\":{\"title\":\"Circular Dependency Plugin\",\"date\":\"2018-01-15T15:25\",\"tags\":[\"webpack\"]}}},\"pathContext\":{\"slug\":\"/posts/circular-dependency-plugin/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---posts-circular-dependency-plugin-58f37a4469492f69fdc0.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"前端小誌\",\"author\":\"Ernie Yang\"}},\"markdownRemark\":{\"id\":\"/Users/ernieyang09/Desktop/workspace/gatsby-blog/src/pages/posts/2018/01/0115--circular-dependency-plugin.md absPath of file >>> MarkdownRemark\",\"html\":\"<snippet>\\n之前在build的時候遇到的問題，主要就是開發的時候完全沒問題，但是在build的時候會發生error，error的畫面我忘記截圖了。最後的結果是import的順序有重復。\\n</snippet>\\n<p>Circular Dependency最常見的錯誤</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// A.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token constant\\\">B</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./B'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// B.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token constant\\\">C</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./C'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// C.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token constant\\\">A</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./A'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// A -> B -> C -> A</span></code></pre>\\n      </div>\\n<p>常常發現\\bimport之後<a href=\\\"https://stackoverflow.com/questions/35240716/webpack-import-returns-undefined-depending-on-the-order-of-imports\\\">拿到undefined</a></p>\\n<p>專案中我將網頁的router抽出來整理(router.js，裡面有import所有router用的component)，然後對每個頁面包覆Page component。</p>\\n<p>Like this</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">import</span> routers <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./routers'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token operator\\\">...</span>\\n\\n<span class=\\\"token punctuation\\\">{</span>\\n  routers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>router <span class=\\\"token operator\\\">=></span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token operator\\\">&lt;</span>Route\\n      path<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>router<span class=\\\"token punctuation\\\">.</span>path<span class=\\\"token punctuation\\\">}</span>\\n      component<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>router<span class=\\\"token punctuation\\\">.</span>component<span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">SomePage</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n        <span class=\\\"token operator\\\">&lt;</span>Page<span class=\\\"token operator\\\">></span>\\n          <span class=\\\"token operator\\\">...</span>\\n        <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>Page<span class=\\\"token operator\\\">></span>\\n    <span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>其中，Page component裡面寫了一個Breadcrumb，Breadcrumb理所當然跟router有關，所以我就在Breadcrumb import routers，開發時完全沒問題，build的時候就爆炸啦XD</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">index <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span>  routers <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> Page <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> Breadcrumb <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> routers</code></pre>\\n      </div>\\n<p>這種重覆import的例子並不是只要有任何的寫到就會出錯，是一種機率性的，就像有時候build起來的css跑掉了，可能是import了某個module(但不一定有用到css)，造成webpack build的時候順序不一樣了，這種build的時候才會出現問題的最麻煩了。</p>\\n<p>不過了解了這個問題之後，google了一下，有一個webpack plugin - <a href=\\\"https://github.com/aackerman/circular-dependency-plugin\\\">Circular Dependency Plugin</a></p>\\n<p>能在runtime的時候，發現重覆import的問題，直接不能執行，並且show出哪些文件有問題，我個人是覺得蠻好用的。</p>\\n<p>最後我的作法是把index跟Breadcrumb load的router切開來寫成兩個檔案，只是以mainatin上就要保持兩邊一致(加入新的\\broute，兩邊都要設計一遍)，目前還沒想到比較好的做法，不過這要看專案設計囉。</p>\",\"fields\":{\"slug\":\"/posts/circular-dependency-plugin/\"},\"frontmatter\":{\"title\":\"Circular Dependency Plugin\",\"date\":\"2018-01-15T15:25\",\"tags\":[\"webpack\"]}}},\"pathContext\":{\"slug\":\"/posts/circular-dependency-plugin/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/posts-circular-dependency-plugin.json\n// module id = 456\n// module chunks = 47039559723594"],"sourceRoot":""}