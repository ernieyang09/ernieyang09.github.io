webpackJsonp([0xa17b15cf1e01c00],{"./node_modules/json-loader/index.js!./.cache/json/posts-redux-dev-tool.json":function(n,s){n.exports={data:{site:{siteMetadata:{title:"前端小誌",author:"Ernie Yang"}},markdownRemark:{id:"/Users/ernieyang09/Desktop/workspace/gatsby-blog/src/pages/posts/2017/08/0819--redux-dev-tool.md absPath of file >>> MarkdownRemark",html:'<p><snippet>相信有開發過redux的人一定都知道redux dev tool，因為production版本的SPA不小心將此打開了，研究了一下還挺有趣的，稍微做個記錄。</snippet></p>\n<p>網路上dev tool有兩種版本</p>\n<p><strong><a href="https://github.com/gaearon/redux-devtools">gaearon/redux-devtools</a></strong> <br/>\nredux作者所寫，設定比較麻煩，我是沒有用過，現在好像也比較少人使用，時代的眼淚。</p>\n<p><strong><a href="https://github.com/zalmoxisus/redux-devtools-extension">redux-devtools-extension</a></strong> <br/>\n用chrome extension開發的就是這個套件，但其實這個套件很強大，可以用於native與server side redux。下面以這個作為介紹。</p>\n<h4>SET UP</h4>\n<ol>\n<li>\n<p>最基本寫法</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>\n               reducer<span class="token punctuation">,</span>\n               <span class="token function">compse</span><span class="token punctuation">(</span>\n                 <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n                 window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION__ <span class="token operator">&amp;&amp;</span>\n                 window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n               <span class="token punctuation">)</span>\n             <span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>於是有人這樣寫production</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">let</span> middleware <span class="token operator">=</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!==</span> <span class="token string">\'production\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       middleware <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>\n         middleware<span class="token punctuation">,</span>\n         window<span class="token punctuation">.</span>devToolsExtension <span class="token operator">&amp;&amp;</span>\n         window<span class="token punctuation">.</span><span class="token function">devToolsExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n       <span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n</code></pre>\n      </div>\n</li>\n<li>\n<p>方便的寫法<br/>\n使用redux-devtools-extension</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'redux-devtools-extension\'</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span>\n              <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span>\n                <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token operator">...</span>middleware<span class="token punctuation">)</span><span class="token punctuation">,</span>\n              <span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n</li>\n</ol>\n<p>看起來沒有差很多，但是redux-devtools-extension還提供不同的情境使用，像是logOnly</p>\n<p>dev extension提供了許多\b<a href="https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md#features">features</a>，這些features預設是打開的，\n我很少用，如果不用建議關掉會提升效能，logOnly mode就是幫你把這些功能關閉而已，然後他又貼心的提供logOnlyInProduction mode。(判斷process.env.NODE_ENV ===\'production\')</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'redux-devtools-extension/logOnlyInProduction\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment" spellcheck="true">// options like actionSanitizer, stateSanitizer</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">/* preloadedState, */</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span>\n  <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token operator">...</span>middleware<span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token comment" spellcheck="true">// other store enhancers if any</span>\n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>當然也可以開developmentOnly mode，關於production mode是否要加入dev extension可以看<a href="https://medium.com/@zalmoxis/using-redux-devtools-in-production-4c5b56c5600f">這篇</a>，寫的很棒，\n最後我是用了logOnlyInProduction，不過文中的website我去看似乎都抜掉了XD。</p>\n<p>其中我還用了一個設定叫做<a href="https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md#features">stateSanitizer</a>\n\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; z-index: -1; display: block; "\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 24.02173913043478%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9klEQVQY013QbUvDMBAH8H6X0XZNk2azTdMHnN26hzd2W6EDEaYyRERQ8K1f/u8l60b1xeUgyf24OyeQOZgsEE5KyrnN/yOIMoxFhuZYgicVkrqFWndQqw48vvvz1zGgH6ZUoOFzbXEmSwv4PIXHEptNNMfzuyBE6hrzTYtqtcOsbvq6Ag6LCkTZEoI+7G4PFhj5U4zGU7hBDC9UV/CewDCeYVJuoKoG798/OL194vn0QVPkNhyjynyNSC97UFnQYoPuLqBIF4gXeyQEPr5+oXt4QXt4GnRIh9mR0T2hrw/2vh97CHI1x021tZ26gYLLaC20skvNLxNepEAht9QyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="you_cant_see_me"\n        title=""\n        src="/static/41d8392e8d9828506bae11e771724122-a408b.png"\n        srcset="/static/41d8392e8d9828506bae11e771724122-4eabf.png 148w,\n/static/41d8392e8d9828506bae11e771724122-5a375.png 295w,\n/static/41d8392e8d9828506bae11e771724122-a408b.png 590w,\n/static/41d8392e8d9828506bae11e771724122-9a0cc.png 885w,\n/static/41d8392e8d9828506bae11e771724122-aa987.png 1180w,\n/static/41d8392e8d9828506bae11e771724122-0c07a.png 1770w,\n/static/41d8392e8d9828506bae11e771724122-56afe.png 1840w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  </p>\n<p>可以將state中機敏性資訊隱閉，防範別人偷偷幹走，雖然在這個範例中一點用都沒，因為在state看不到，去dev tool的network觀察api連線就好了XDD，不過聊勝於無囉。</p>\n<p>原本有想要把整份文件翻成中文的，但是實在太多也太忙了，有一些沒有實際使用也怕翻錯，有空再研究吧。</p>',fields:{slug:"/posts/redux-dev-tool/"},frontmatter:{title:"Redux dev tools",date:"2018-08-19T23:42",tags:["redux"]}}},pathContext:{slug:"/posts/redux-dev-tool/"}}}});
//# sourceMappingURL=path---posts-redux-dev-tool-ae05ca97bcc54360d343.js.map